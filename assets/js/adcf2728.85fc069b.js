"use strict";(self.webpackChunkrbs_dev_docs=self.webpackChunkrbs_dev_docs||[]).push([[5378],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),m=o,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||a;return n?r.createElement(h,i(i({ref:t},d),{},{components:n})):r.createElement(h,i({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},6881:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return p}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],s={sidebar_position:3},l="Methods",c={unversionedId:"main_concepts/methods",id:"main_concepts/methods",isDocsHomePage:!1,title:"Methods",description:"In your class template you can add methods to your class.",source:"@site/docs/main_concepts/methods.mdx",sourceDirName:"main_concepts",slug:"/main_concepts/methods",permalink:"/docs/main_concepts/methods",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/main_concepts/methods.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"State",permalink:"/docs/main_concepts/state"},next:{title:"Authorization",permalink:"/docs/main_concepts/authorization"}},d=[{value:"Steps",id:"steps",children:[],level:3},{value:"Concurrency &amp; FIFO",id:"concurrency--fifo",children:[],level:2}],u={toc:d};function p(e){var t=e.components,s=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"methods"},"Methods"),(0,a.kt)("p",null,"In your class template you can add methods to your class."),(0,a.kt)("p",null,"Each step can have a handle method. Let's define sayHello handler in our index.ts."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"preAuthorizer: index.preAuthorizer\ninit: index.init\ngetState: index.getState\n\nmethods:\n\n    - method: sayHello\n      tag: test\n      sync: true\n      steps:\n          - id: default\n            handler: index.sayHello\n")),(0,a.kt)("h3",{id:"steps"},"Steps"),(0,a.kt)("p",null,"Each method can have multiple steps. You can define a different handler function for each step. Steps are optional. You can define a method with one step only like the one above. However if you like you can define a method like below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"preAuthorizer: auth.preAuthorizer\ninit: index.init\ngetState: index.getState\ndependencies: ['user']\nmethods:\n    - method: signup\n      sync: true\n      steps:\n          - id: lookupUser\n            handler: auth.lookupUser\n          - id: userAlreadyExists\n          - id: createUser\n            handler: auth.createUser\n          - id: generateToken\n            handler: auth.generateToken\n          - id: sendEmailToCallCenter\n            handler: auth.sendEmailToCallCenter\n          - id: invalidData\n      flow:\n          - direction:\n            - lookupUser\n            - createUser\n          - direction:\n            - createUser\n            - sendEmailToCallCenter\n          - direction:\n            - sendEmailToCallCenter\n            - generateToken\n          - id: goToUserAlreadyExists\n            direction:\n            - lookupUser\n            - userAlreadyExists\n          - id: goToInvalidData\n            direction:\n            - createUser\n            - invalidData\n")),(0,a.kt)("p",null,"This definition creates following method:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Methods",src:n(315).Z})),(0,a.kt)("p",null,"You might want to add steps for:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"reusability: You can re-use some handler methods"),(0,a.kt)("li",{parentName:"ul"},"visualization: Even non developers can look at your method diagram and understand how it works. Also previous calls are logged in the system and you can visualize the flow of a method in UI.")),(0,a.kt)("h2",{id:"concurrency--fifo"},"Concurrency & FIFO"),(0,a.kt)("p",null,"One of the most important features of class methods is that by default concurrency is 1. Calls made to your method gets ordered and executed one by one and exactly once guaranteed. This is a very important and crucial part of development with cloud objects."),(0,a.kt)("p",null,"Every time a method is running you are handed a data object and you are responsible of returning it. Basically what you do is calculating the next state of this instance. As long as the concurrency is one there is no risk of a race condition. So it is safe to alter the state any way you want and also check for state and calculate your next move."),(0,a.kt)("p",null,"Let's say there are two methods on a wallet class."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Methods",src:n(9441).Z})),(0,a.kt)("p",null,"Everytime these are called they are ordered:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Methods",src:n(8328).Z})))}p.isMDXComponent=!0},315:function(e,t,n){t.Z=n.p+"assets/images/method_with_steps-e0f7e557c83a8cb363f53f05c2cefd07.png"},8328:function(e,t,n){t.Z=n.p+"assets/images/wallet_fifo-87672a4146170e430d593ec068252292.png"},9441:function(e,t,n){t.Z=n.p+"assets/images/wallet_methods-75f007f25ff1876a0e973ba411a6a633.png"}}]);