"use strict";(self.webpackChunkrio_doc=self.webpackChunkrio_doc||[]).push([[6108],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var d=r.createContext({}),l=function(e){var n=r.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=l(e.components);return r.createElement(d.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,d=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(t),m=o,f=u["".concat(d,".").concat(m)]||u[m]||p[m]||a;return t?r.createElement(f,i(i({ref:n},c),{},{components:t})):r.createElement(f,i({ref:n},c))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=u;var s={};for(var d in n)hasOwnProperty.call(n,d)&&(s[d]=n[d]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=t[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},8075:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return d},default:function(){return m},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return p}});var r=t(7462),o=t(3366),a=(t(7294),t(3905));t(2389),t(3725);var i=["components"],s={id:"Dependencies",sidebar_label:"Dependencies",sidebar_position:5},d="Dependencies",l={unversionedId:"Concepts/Dependencies",id:"Concepts/Dependencies",title:"Dependencies",description:"Beside frameworks' dependencies (npm, pypi), there are also dependencies that are not part of the framework itself. At this point, Cloud Objects supports custom build dependencies.",source:"@site/docs/Concepts/Dependencies.mdx",sourceDirName:"Concepts",slug:"/Concepts/Dependencies",permalink:"/docs/Concepts/Dependencies",editUrl:"https://github.com/rettersoft/rettersoft.github.io/blob/main/docs/Concepts/Dependencies.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"Dependencies",sidebar_label:"Dependencies",sidebar_position:5},sidebar:"ConceptsSideBar",previous:{title:"Other Languages",permalink:"/docs/Concepts/Classes/Supported Langueges/OtherLanguages"},next:{title:"Models",permalink:"/docs/Concepts/Models"}},c={},p=[{value:"Local",id:"local",level:3},{value:"Cloud",id:"cloud",level:3}],u={toc:p};function m(e){var n=e.components,t=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"dependencies"},"Dependencies"),(0,a.kt)("p",null,"Beside frameworks' dependencies (",(0,a.kt)("inlineCode",{parentName:"p"},"npm"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"pypi"),"), there are also dependencies that are not part of the framework itself. At this point, Cloud Objects supports custom build dependencies.\nYou can add your custom build dependencies to your class's ",(0,a.kt)("inlineCode",{parentName:"p"},"template")," file in order to use across classes."),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"For now, we  only support custom build dependencies for NodeJS (Javascript) projects."))),(0,a.kt)("p",null,"There are ",(0,a.kt)("strong",{parentName:"p"},"two")," types of dependencies:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Local Dependencies (Bundled with your source code)"),(0,a.kt)("li",{parentName:"ul"},"Cloud Dependencies (Generated via RDK)")),(0,a.kt)("h3",{id:"local"},"Local"),(0,a.kt)("p",null,"There are some common case when we need to use ",(0,a.kt)("inlineCode",{parentName:"p"},"reusable components")," from our source code like error messages, utility functions or data. Local dependencies are the solution here to those problems in ",(0,a.kt)("del",{parentName:"p"},"seconds")," ",(0,a.kt)("inlineCode",{parentName:"p"},"nanoseconds"),". Dependencies will be mounted into your class even before state and help you get rid of some boilerplate code into them."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="dependencies/mylib/index.js"',title:'"dependencies/mylib/index.js"'},"function multiply(a, b) {\n  return a * b;\n}\n\nmodule.exports = {\n  multiply\n};\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"In order to use dependency, you need to import it in your class's ",(0,a.kt)("inlineCode",{parentName:"p"},"template")," file.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="classes/User/template.yml"',title:'"classes/User/template.yml"'},"authorizer: index.authorizer\ninit: index.init\ngetState: index.getState\ngetInstanceId: index.getInstanceId\ndependencies:\n  - mylib\nmethods:\n  - method: login\n    invocationType: IMMEDIATE\n    handler: index.login\n")),(0,a.kt)("h3",{id:"cloud"},"Cloud"),(0,a.kt)("p",null,"In some cases, you may need to create a dependency on runtime via ",(0,a.kt)("inlineCode",{parentName:"p"},"RDK")," (Retter Development Kit). You can add dependency source code into a zip file and create dependency."),(0,a.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Classes that use cloud dependencies need to be re-deployed to the cloud."))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="classes/User/profile.ts"',title:'"classes/User/profile.ts"'},"import RDK, {Data,StepResponse} from \"@retter/rdk\";\nimport AdmZip from \"adm-zip\";\n\nconst rdk = new RDK();\n\n\nexport async function generateCloudDependency(data: Data): Promise<StepResponse> {\n\n    const customData = {\n        userName: 'John Doe',\n        isAwesome: true,\n        reusable: true\n    };\n\n    const zip = new AdmZip();\n    zip.addFile('nodejs/node_modules/myCloudLib/data.json', Buffer.from(JSON.stringify(customData)))\n\n    await rdk.upsertDependency({\n        dependencyName: 'myCloudLib',\n        zipFile: zip.toBuffer(),\n    })\n\n    return data\n}\n")),(0,a.kt)("p",null,"You can use ",(0,a.kt)("inlineCode",{parentName:"p"},"multi-dependency")," in your class"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="classes/Order/template.yml"',title:'"classes/Order/template.yml"'},"authorizer: index.authorizer\ninit: index.init\ngetState: index.getState\ngetInstanceId: index.getInstanceId\ndependencies:\n  // highlight-next-line\n  - myCloudLib\n  - otherLocalLib\nmethods:\n  - method: deliver\n    invocationType: IMMEDIATE\n    handler: operations.deliver\n")))}m.isMDXComponent=!0}}]);